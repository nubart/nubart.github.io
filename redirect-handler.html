<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex,nofollow">
    <title>Redirecting...</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f5f5f5;
        }
        .loader {
            text-align: center;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #028a8c;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="loader">
        <div class="spinner"></div>
        <p>Redirecting...</p>
    </div>

    <script>
        // Function to extract language from URL
        function getLangFromURL(url) {
            try {
                const urlObj = new URL(url);
                // Check for both 'lang' and 'zf_lang' parameters (Zoho forms use zf_lang)
                return urlObj.searchParams.get('lang') || urlObj.searchParams.get('zf_lang');
            } catch (e) {
                return null;
            }
        }

        // Try to get language from referrer first, then from current URL
        let lang = null;

        // Check referrer (where the user came from - the Zoho form)
        if (document.referrer) {
            lang = getLangFromURL(document.referrer);
        }

        // If not found in referrer, check current URL as fallback
        if (!lang) {
            lang = getLangFromURL(window.location.href);
        }

        // Default to English if still not found
        lang = lang || 'en';

        // Map languages to their respective thank you pages
        const thankYouPages = {
            'en': '/thankyou.html',
            'de': '/de/danke.html',
            'es': '/es/gracias.html',
            'fr': '/fr/merci.html',
            'it': '/it/grazie.html',
            'ja': '/ja/thankyou.html',
            'nl': '/nl/bedanken.html',
            'pl': '/pl/dzieki.html',
            'bg': '/bg/blagodarya.html',
            'pt': '/pt-br/obrigado.html',  // Portuguese uses pt-br directory
            'pt-br': '/pt-br/obrigado.html'
        };

        // Redirect to the appropriate thank you page
        if (thankYouPages[lang]) {
            window.location.href = thankYouPages[lang];
        } else {
            // If language not found, default to English
            window.location.href = thankYouPages['en'];
        }
    </script>
</body>
</html>
